---
import { getCollection } from 'astro:content'

const projects = await getCollection('projects')
const displayedProjects = projects.slice(0, 3)
const hasMore = projects.length > 3
---

<section class="space-y-8">
  <h2 class="text-section-mobile md:text-section font-serif font-semibold">
    Projects
  </h2>
  <div class="space-y-6">
    {
      displayedProjects.map((project) => (
        <article class="space-y-1" transition:name={`project-${project.id}`}>
          <h3 class="text-display-mobile md:text-display font-serif font-semibold">
            {project.data.title}
          </h3>
          <p class="text-body text-text-secondary leading-relaxed max-w-prose">
            {project.data.description}
          </p>
          <a
            href={project.data.link}
            target="_blank"
            rel="noopener noreferrer"
            class="link text-small inline-block"
          >
            → View Project
          </a>
        </article>
      ))
    }
  </div>
  {
    hasMore && (
      <a href="/projects" class="link text-small inline-block">
        → View All Projects
      </a>
    )
  }
</section>
